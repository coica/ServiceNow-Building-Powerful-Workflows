<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_fix">
    <sys_script_fix action="INSERT_OR_UPDATE">
        <active>true</active>
        <before>false</before>
        <description/>
        <flush_cache>false</flush_cache>
        <name/>
        <record_for_rollback>false</record_for_rollback>
        <run_once>true</run_once>
        <script><![CDATA[var httpclient = Packages.org.apache.commons.httpclient;

var HttpClient = httpclient.HttpClient;

var UsernamePasswordCredentials = httpclient.UsernamePasswordCredentials;

var AuthScope = httpclient.auth.AuthScope;
var GetMethod = httpclient.methods.GetMethod;

var client = new HttpClient();

var authScope = new AuthScope("https://dev58650.service-now.com/", 443, null);

var credentials = new UsernamePasswordCredentials("admin", "admin");

client.getState().setCredentials( authScope, credentials);
       
        // create a GET method that reads a file over HTTPS,
        // we know that this file requires basic
        // authentication

var get = new GetMethod( "https://demo.service-now.com/incident_list.do?sysparm_query=incident_state%3D1%5Epriority%3D1&XML");
       
        // Tell the GET method to automatically handle authentication. The
        // method will use any appropriate credentials to handle basic
        // authentication requests.  Setting this value to false will cause
        // any request for authentication to return with a status of 401.
        // It will then be up to the client to handle the authentication.

get.setDoAuthentication( true );
       
                  // execute
var status = client.executeMethod(get);
           
                  //Print out the GET Headers
var headers = get.getResponseHeaders();
for (var i=0;i<headers.length;i++){
  gs.print(headers[i].getName() + ":"+headers[i].getValue());
}
            // print the status and response
var result = (status + "\n" + get.getResponseBodyAsString()).replace(/</g, "&"+"lt;");
gs.print(result);
           

            // release any connection resources used by the method
get.releaseConnection();]]></script>
        <sys_class_name>sys_script_fix</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-05-21 10:20:04</sys_created_on>
        <sys_id>93277f5bdbb81cd00d7cfe1b6896196c</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name/>
        <sys_package display_value="My Hotel" source="x_hotel">a8f395beebc522004fcde08a5206fe2e</sys_package>
        <sys_policy/>
        <sys_scope display_value="My Hotel">a8f395beebc522004fcde08a5206fe2e</sys_scope>
        <sys_update_name>sys_script_fix_93277f5bdbb81cd00d7cfe1b6896196c</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-05-21 10:20:04</sys_updated_on>
        <unloadable>false</unloadable>
    </sys_script_fix>
</record_update>
